(this.webpackJsonpreststops=this.webpackJsonpreststops||[]).push([[1],{110:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),s=n(35),c=n.n(s),i=n(27),a=n(9),j=n(69),u=n(11),l=n.n(u),b=n(16),d=n(10),p=n(36),h=n(33),f=n(5),O={fill:"#bf616a",stroke:"none"},y=function(e){var t=e.size,n=void 0===t?20:t;return Object(f.jsx)("svg",{height:n,viewBox:"0 0 24 24",style:O,children:Object(f.jsx)("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})})},x=o.memo(y),m=n(74),g=n.n(m),v="pk.eyJ1IjoiYmx1ZWdnZW1hbm4iLCJhIjoiY2t3dDFjeG54MDRrYTJxbWl4ZmZkMmR2YyJ9.qJKTee6lqjpS3fs3YqynWw",_=function(e){var t=Object(o.useState)({latitude:50.7577,longitude:-13.4376,zoom:3,transitionDuration:1111,transitionInterpolator:new h.a}),n=Object(d.a)(t,2),r=n[0],s=n[1];Object(o.useEffect)((function(){if(e.bbox.length>0){var t={width:window.innerWidth,height:300,latitude:r.latitude,longitude:r.longitude,zoom:r.zoom},n=new h.e(t).fitBounds([[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]]);s(Object(p.a)(Object(p.a)({},r),n))}}),[e.bbox]);return Object(f.jsxs)(h.f,Object(p.a)(Object(p.a)({},r),{},{mapboxApiAccessToken:v,width:"100%",height:"300px",mapStyle:"mapbox://styles/mapbox/dark-v9",onViewportChange:function(e){return s(e)},children:[e.route&&Object(f.jsx)(h.d,{id:"route",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:g.a.decode(e.route,5).map((function(e){return e.reverse()}))}}]},children:Object(f.jsx)(h.b,Object(p.a)({},{type:"line",paint:{"line-width":3,"line-color":"#ebcb8b","line-opacity":.65}}))}),e.reststops.map((function(e,t){return Object(f.jsx)(h.c,{longitude:e.location[0],latitude:e.location[1],offsetTop:-20,offsetLeft:-10,children:Object(f.jsx)(x,{size:20})},t)}))]}))},w=function(e){return Object(f.jsxs)(a.b,{children:[Object(f.jsxs)(a.d,{children:[Object(f.jsx)(a.e,{children:"rest_area"===e.reststop.category?"Reststop":"Gas-Station"}),Object(f.jsx)(a.f,{children:e.reststop.name})]}),Object(f.jsx)(a.c,{children:e.reststop.description})]})},k=(n(110),function(e){var t=Object(o.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1],c=function(){var e=Object(b.a)(l.a.mark((function e(t){var n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length<3)){e.next=2;break}return e.abrupt("return");case 2:return"https://api.mapbox.com/geocoding/v5/mapbox.places",e.next=5,fetch("".concat("https://api.mapbox.com/geocoding/v5/mapbox.places","/").concat(encodeURIComponent(t),".json?autocomplete=true&fuzzyMatch=true&access_token=").concat(v));case 5:return n=e.sent,e.next=8,n.json();case 8:o=e.sent,s(o.features);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){c(e.destination)}),[e.destination]),Object(f.jsx)(a.k,{children:r.map((function(t,n){return Object(f.jsx)(a.i,{onClick:function(){return e.onDestinationSelected(t.geometry)},children:Object(f.jsx)(a.j,{children:t.place_name})},n)}))})}),S=function(){var e=Object(o.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){r(e)}))}),[]),n},C=function(){var e=Object(o.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)([]),c=Object(d.a)(s,2),i=c[0],j=c[1],u=Object(o.useState)(null),p=Object(d.a)(u,2),h=p[0],O=p[1],y=Object(o.useState)([]),x=Object(d.a)(y,2),m=x[0],g=x[1],v=Object(o.useState)(null),C=Object(d.a)(v,2),D=C[0],z=C[1],E=Object(o.useState)(null),F=Object(d.a)(E,2),L=F[0],T=F[1],W=S(),I=function(){var e=Object(b.a)(l.a.mark((function e(t,n){var o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&null!==t){e.next=2;break}return e.abrupt("return");case 2:return r(!0),"https://reststops.thomasbrueggemann.com",e.next=6,fetch("".concat("https://reststops.thomasbrueggemann.com","/reststops?start_lon=").concat(t.coords.longitude,"&start_lat=").concat(t.coords.latitude)+"&end_lon=".concat(n.coordinates[0],"&end_lat=").concat(n.coordinates[1],"&max_detour_seconds=400"));case 6:return o=e.sent,e.next=9,o.json();case 9:s=e.sent,r(!1),j(s.reststops),O(s.route),g(s.bbox);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){I(W,L)}),[W,L]),Object(f.jsxs)(a.l,{children:[Object(f.jsx)(a.h,{children:Object(f.jsx)(a.r,{children:Object(f.jsx)(a.p,{placeholder:"What's your destination?",onIonChange:function(e){z(e.detail.value),j([]),O(null),g([])}})})}),Object(f.jsxs)(a.g,{fullscreen:!0,children:[Object(f.jsx)(a.h,{collapse:"condense",children:Object(f.jsx)(a.r,{children:Object(f.jsx)(a.q,{size:"large",children:"Reststops"})})}),!n&&0===i.length&&null===D&&Object(f.jsx)("div",{children:"Please select a destination"}),!n&&0===i.length&&null!==D&&D.length>=3&&Object(f.jsx)(k,{destination:D,onDestinationSelected:function(e){return T(e)}}),i.length>0&&Object(f.jsx)(_,{reststops:i,route:h,bbox:m}),n&&Object(f.jsx)(a.m,{type:"indeterminate"}),i.map((function(e,t){return Object(f.jsx)(w,{reststop:e},t)}))]})]})},D=(n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),function(){return Object(f.jsx)(a.a,{children:Object(f.jsx)(j.a,{children:Object(f.jsx)(a.o,{children:Object(f.jsx)(i.a,{exact:!0,path:"/",children:Object(f.jsx)(C,{})})})})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=function(e){e&&e instanceof Function&&n.e(58).then(n.bind(null,184)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),s(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(D,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),z()},82:function(e,t,n){var o={"./ion-action-sheet.entry.js":[124,5],"./ion-alert.entry.js":[125,6],"./ion-app_8.entry.js":[126,7],"./ion-avatar_3.entry.js":[127,17],"./ion-back-button.entry.js":[128,18],"./ion-backdrop.entry.js":[129,43],"./ion-button_2.entry.js":[130,19],"./ion-card_5.entry.js":[131,20],"./ion-checkbox.entry.js":[132,21],"./ion-chip.entry.js":[133,22],"./ion-col_3.entry.js":[134,44],"./ion-datetime_3.entry.js":[135,10],"./ion-fab_3.entry.js":[136,23],"./ion-img.entry.js":[137,45],"./ion-infinite-scroll_2.entry.js":[138,46],"./ion-input.entry.js":[139,24],"./ion-item-option_3.entry.js":[140,25],"./ion-item_8.entry.js":[141,26],"./ion-loading.entry.js":[142,27],"./ion-menu_3.entry.js":[143,28],"./ion-modal.entry.js":[144,8],"./ion-nav_2.entry.js":[145,14],"./ion-popover.entry.js":[146,9],"./ion-progress-bar.entry.js":[147,29],"./ion-radio_2.entry.js":[148,30],"./ion-range.entry.js":[149,31],"./ion-refresher_2.entry.js":[150,11],"./ion-reorder_2.entry.js":[151,16],"./ion-ripple-effect.entry.js":[152,47],"./ion-route_4.entry.js":[153,32],"./ion-searchbar.entry.js":[154,33],"./ion-segment_2.entry.js":[155,34],"./ion-select_3.entry.js":[156,35],"./ion-slide_2.entry.js":[157,48],"./ion-spinner.entry.js":[158,13],"./ion-split-pane.entry.js":[159,49],"./ion-tab-bar_2.entry.js":[160,36],"./ion-tab_2.entry.js":[161,15],"./ion-text.entry.js":[162,37],"./ion-textarea.entry.js":[163,38],"./ion-toast.entry.js":[164,39],"./ion-toggle.entry.js":[165,12],"./ion-virtual-scroll.entry.js":[166,50]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=82,e.exports=r},84:function(e,t,n){var o={"./ion-icon.entry.js":[167,57]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=84,e.exports=r}},[[122,3,4]]]);
//# sourceMappingURL=main.3dc713cc.chunk.js.map