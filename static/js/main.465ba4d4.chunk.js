(this.webpackJsonpreststops=this.webpackJsonpreststops||[]).push([[1],{114:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var o=n(3),i=n.n(o),r=n(39),c=n.n(r),s=n(28),a=n(16),l=n(71),u=n(2),d=n.n(u),j=n(7),b=n(15),h=n(34),f=n(31),x=n(13),p={fill:"#bf616a",strokeWidth:1,stroke:"#d8dee9"},O=function(e){var t=e.size,n=void 0===t?20:t,o=e.numbering;return Object(x.jsxs)("svg",{height:n,viewBox:"-1 -1 25 25",style:p,children:[Object(x.jsx)("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}),Object(x.jsx)("text",{x:"8",y:"16",fill:"white",fontSize:15,children:o})]})},g=o.memo(O),m=n(76),y=n.n(m),v="pk.eyJ1IjoiYmx1ZWdnZW1hbm4iLCJhIjoiY2t3dDFjeG54MDRrYTJxbWl4ZmZkMmR2YyJ9.qJKTee6lqjpS3fs3YqynWw",w={type:"circle",paint:{"circle-radius":7,"circle-color":"#88c0d0","circle-opacity":1,"circle-stroke-color":"#d8dee9","circle-stroke-width":2}},k=function(e){return Object(x.jsx)(f.d,{id:"currentLocation",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[e.longitude,e.latitude]}}]},children:Object(x.jsx)(f.b,Object(h.a)({},w))})},W=n(47);n.n(W).a.workerClass=n(111).default;var z=function(e){var t=Object(o.useState)({latitude:50.7577,longitude:-13.4376,zoom:3,transitionDuration:1111,transitionInterpolator:new f.a}),n=Object(b.a)(t,2),i=n[0],r=n[1];Object(o.useEffect)((function(){if(e.bbox.length>0){var t={width:window.innerWidth,height:300,latitude:i.latitude,longitude:i.longitude,zoom:i.zoom},n=new f.e(t).fitBounds([[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]]);r(Object(h.a)(Object(h.a)({},i),n))}}),[e.bbox]);return Object(x.jsxs)(f.f,Object(h.a)(Object(h.a)({},i),{},{mapboxApiAccessToken:v,width:"100%",height:"300px",mapStyle:"mapbox://styles/mapbox/dark-v9",onViewportChange:function(e){return r(e)},children:[e.route&&Object(x.jsx)(f.d,{id:"route",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:y.a.decode(e.route,5).map((function(e){return e.reverse()}))}}]},children:Object(x.jsx)(f.b,Object(h.a)({},{type:"line",paint:{"line-width":5,"line-color":"#ebcb8b","line-opacity":.65},layout:{"line-join":"round"}}))}),e.currentLocation&&Object(x.jsx)(k,{longitude:e.currentLocation.coords.longitude,latitude:e.currentLocation.coords.latitude}),e.reststops.map((function(e,t){return Object(x.jsx)(f.c,{longitude:e.location[0],latitude:e.location[1],offsetTop:-20,offsetLeft:-10,children:Object(x.jsx)(g,{size:30,numbering:t+1})},t)}))]}))},S=n(22),_=n(23),C=function(e){var t=function(t,n){return e.reststop.tags[t]===n},n=Math.ceil(e.reststop.detour_seconds/60),o=0===n?"#a3be8c":n<10?"#ebcb8b":"#bf616a",i={marginRight:"10px"};return Object(x.jsx)(a.b,{children:Object(x.jsx)(a.i,{children:Object(x.jsxs)(a.r,{class:"ion-justify-content-between",children:[Object(x.jsx)(a.g,{className:"ion-align-self-center",size:"1",children:Object(x.jsx)(g,{size:40,numbering:e.numbering})}),Object(x.jsxs)(a.g,{children:[Object(x.jsxs)(a.d,{children:[Object(x.jsx)(a.e,{children:Object(x.jsxs)("b",{style:{color:o},children:["+",n," min"]})}),Object(x.jsx)(a.f,{children:e.reststop.name?e.reststop.name:"restarea"===e.reststop.category?"Rest area":"Service area"})]}),Object(x.jsxs)(a.c,{children:[e.reststop.description,t("toilets","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.j,style:i}),(t("highway","services")||t("amenity","fuel"))&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.f,style:i}),(t("highway","rest_area")||t("amenity","parking"))&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.h,style:i}),t("tourism","hotel")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.b,style:i}),t("caravan","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.c,style:i}),t("baby_change","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.a,style:i}),t("charging_station","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.d,style:i}),(t("fast_food","yes")||t("restaurant","yes")||t("amenity","restaurant"))&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.m,style:i}),t("shower","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.l,style:i}),t("wheelchair","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.n,style:i}),t("wheelchair","no")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.n,style:i}),t("waste_bucket","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.i,style:i}),(t("shop","yes")||t("shop","kiosk"))&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.k,style:i}),t("tourism","information")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.g,style:i}),t("drinking_water","yes")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.e,style:i}),t("drinking_water","no")&&Object(x.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:_.e,style:i}),e.reststop.tags.opening_hours&&Object(x.jsxs)("p",{style:{marginTop:"10px"},children:[Object(x.jsx)("b",{children:"Open:"})," ",Object(x.jsx)("span",{children:e.reststop.tags.opening_hours})]})]})]})]})})})},L=(n(114),function(e){var t=Object(o.useState)([]),n=Object(b.a)(t,2),i=n[0],r=n[1];return Object(o.useEffect)((function(){var t=new AbortController,n=function(){var e=Object(j.a)(d.a.mark((function e(n){var o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length<3)){e.next=2;break}return e.abrupt("return");case 2:return"https://api.mapbox.com/geocoding/v5/mapbox.places",e.prev=3,e.next=6,fetch("".concat("https://api.mapbox.com/geocoding/v5/mapbox.places","/").concat(encodeURIComponent(n),".json?autocomplete=true&fuzzyMatch=true&access_token=").concat(v),{signal:t.signal});case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,r(i.features),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(3);case 15:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return n(e.destination),function(){t.abort()}}),[e.destination]),Object(x.jsx)(a.m,{children:i.map((function(t,n){return Object(x.jsx)(a.k,{onClick:function(){return e.onDestinationSelected(t.geometry)},children:Object(x.jsx)(a.l,{children:t.place_name})},n)}))})}),P=function(){var e=Object(o.useState)(null),t=Object(b.a)(e,2),n=t[0],i=t[1];return Object(o.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){i(e)}))}),[]),n},E=function(){var e=Object(o.useState)(!1),t=Object(b.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)([]),c=Object(b.a)(r,2),s=c[0],l=c[1],u=Object(o.useState)(null),h=Object(b.a)(u,2),f=h[0],p=h[1],O=Object(o.useState)([]),g=Object(b.a)(O,2),m=g[0],y=g[1],v=Object(o.useState)(null),w=Object(b.a)(v,2),k=w[0],W=w[1],S=Object(o.useState)(null),_=Object(b.a)(S,2),E=_[0],T=_[1],D=P(),F=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&null!==t){e.next=2;break}return e.abrupt("return");case 2:return i(!0),"https://reststops.thomasbrueggemann.com",e.next=6,fetch("".concat("https://reststops.thomasbrueggemann.com","/reststops?start_lon=").concat(t.coords.longitude,"&start_lat=").concat(t.coords.latitude)+"&end_lon=".concat(n.coordinates[0],"&end_lat=").concat(n.coordinates[1],"&max_detour_seconds=400"));case 6:return o=e.sent,e.next=9,o.json();case 9:r=e.sent,i(!1),l(r.reststops),p(r.route),y(r.bbox);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){F(D,E)}),[D,E]),Object(x.jsxs)(a.n,{children:[Object(x.jsx)(a.j,{children:Object(x.jsx)(a.t,{children:Object(x.jsx)(a.s,{placeholder:"What's your destination?",onIonChange:function(e){W(e.detail.value),l([]),p(null),y([])}})})}),Object(x.jsxs)(a.h,{fullscreen:!0,children:[!n&&0===s.length&&null===k&&Object(x.jsx)("div",{style:{textAlign:"center",marginTop:"40px"},children:"\ud83d\ude8f Please find a destination"}),!n&&0===s.length&&null!==k&&k.length>=3&&Object(x.jsx)(L,{destination:k,onDestinationSelected:function(e){return T(e)}}),s.length>0&&Object(x.jsx)(z,{reststops:s,route:f,bbox:m,currentLocation:D}),n&&Object(x.jsx)(a.o,{type:"indeterminate"}),s.map((function(e,t){return Object(x.jsx)(C,{numbering:t+1,reststop:e},t)}))]})]})};n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125);Object(a.C)({mode:["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document?"ios":"md"});var T=function(){return Object(x.jsx)(a.a,{children:Object(x.jsx)(l.a,{children:Object(x.jsx)(a.q,{children:Object(x.jsx)(s.a,{exact:!0,path:"/",children:Object(x.jsx)(E,{})})})})})},D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var M=function(e){e&&e instanceof Function&&n.e(14).then(n.bind(null,140)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),o(e),i(e),r(e),c(e)}))};c.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");D?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):F(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):F(t,e)}))}}(),M()},83:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=83},84:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=84},85:function(e,t,n){var o={"./ion-icon.entry.js":[130,12]};function i(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(o)},i.id=85,e.exports=i}},[[126,2,3]]]);
//# sourceMappingURL=main.465ba4d4.chunk.js.map