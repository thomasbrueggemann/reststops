(this.webpackJsonpreststops=this.webpackJsonpreststops||[]).push([[1],{115:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(37),i=n.n(c),s=n(27),a=n(9),u=n(72),j=n(11),l=n.n(j),b=n(16),d=n(10),p=n(32),f=n(30),h=n(4),x={fill:"#bf616a",stroke:"none"},y=function(e){var t=e.size,n=void 0===t?20:t;return Object(h.jsx)("svg",{height:n,viewBox:"0 0 24 24",style:x,children:Object(h.jsx)("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})})},O=o.memo(y),g=n(77),m=n.n(g),v="pk.eyJ1IjoiYmx1ZWdnZW1hbm4iLCJhIjoiY2t3dDFjeG54MDRrYTJxbWl4ZmZkMmR2YyJ9.qJKTee6lqjpS3fs3YqynWw",_={type:"circle",paint:{"circle-radius":8,"circle-color":"#88c0d0","circle-opacity":1,"circle-stroke-color":"#fff","circle-stroke-width":1}},w=function(e){return Object(h.jsx)(f.d,{id:"currentLocation",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[e.longitude,e.latitude]}}]},children:Object(h.jsx)(f.b,Object(p.a)({},_))})},k=function(e){var t=Object(o.useState)({latitude:50.7577,longitude:-13.4376,zoom:3,transitionDuration:1111,transitionInterpolator:new f.a}),n=Object(d.a)(t,2),r=n[0],c=n[1];Object(o.useEffect)((function(){if(e.bbox.length>0){var t={width:window.innerWidth,height:300,latitude:r.latitude,longitude:r.longitude,zoom:r.zoom},n=new f.e(t).fitBounds([[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]]);c(Object(p.a)(Object(p.a)({},r),n))}}),[e.bbox]);return Object(h.jsxs)(f.f,Object(p.a)(Object(p.a)({},r),{},{mapboxApiAccessToken:v,width:"100%",height:"300px",mapStyle:"mapbox://styles/mapbox/dark-v9",onViewportChange:function(e){return c(e)},children:[e.route&&Object(h.jsx)(f.d,{id:"route",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:m.a.decode(e.route,5).map((function(e){return e.reverse()}))}}]},children:Object(h.jsx)(f.b,Object(p.a)({},{type:"line",paint:{"line-width":5,"line-color":"#ebcb8b","line-opacity":.65},layout:{"line-join":"round"}}))}),e.currentLocation&&Object(h.jsx)(w,{longitude:e.currentLocation.coords.longitude,latitude:e.currentLocation.coords.latitude}),e.reststops.map((function(e,t){return Object(h.jsx)(f.c,{longitude:e.location[0],latitude:e.location[1],offsetTop:-20,offsetLeft:-10,children:Object(h.jsx)(O,{size:20})},t)}))]}))},S=n(55),C=n(56),L=function(e){return Object(h.jsxs)(a.b,{children:[Object(h.jsxs)(a.d,{children:[Object(h.jsx)(a.e,{children:"rest_area"===e.reststop.category?"Reststop":"Gas-Station"}),Object(h.jsx)(a.f,{children:e.reststop.name})]}),Object(h.jsxs)(a.c,{children:[e.reststop.description,Object(h.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:C.b}),Object(h.jsx)(S.a,{size:"2x",fixedWidth:!0,icon:C.a})]})]})},z=(n(115),function(e){var t=Object(o.useState)([]),n=Object(d.a)(t,2),r=n[0],c=n[1],i=function(){var e=Object(b.a)(l.a.mark((function e(t){var n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length<3)){e.next=2;break}return e.abrupt("return");case 2:return"https://api.mapbox.com/geocoding/v5/mapbox.places",e.next=5,fetch("".concat("https://api.mapbox.com/geocoding/v5/mapbox.places","/").concat(encodeURIComponent(t),".json?autocomplete=true&fuzzyMatch=true&access_token=").concat(v));case 5:return n=e.sent,e.next=8,n.json();case 8:o=e.sent,c(o.features);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){i(e.destination)}),[e.destination]),Object(h.jsx)(a.k,{children:r.map((function(t,n){return Object(h.jsx)(a.i,{onClick:function(){return e.onDestinationSelected(t.geometry)},children:Object(h.jsx)(a.j,{children:t.place_name})},n)}))})}),F=function(){var e=Object(o.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){r(e)}))}),[]),n},D=function(){var e=Object(o.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)([]),i=Object(d.a)(c,2),s=i[0],u=i[1],j=Object(o.useState)(null),p=Object(d.a)(j,2),f=p[0],x=p[1],y=Object(o.useState)([]),O=Object(d.a)(y,2),g=O[0],m=O[1],v=Object(o.useState)(null),_=Object(d.a)(v,2),w=_[0],S=_[1],C=Object(o.useState)(null),D=Object(d.a)(C,2),W=D[0],E=D[1],T=F(),I=function(){var e=Object(b.a)(l.a.mark((function e(t,n){var o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&null!==t){e.next=2;break}return e.abrupt("return");case 2:return r(!0),"https://reststops.thomasbrueggemann.com",e.next=6,fetch("".concat("https://reststops.thomasbrueggemann.com","/reststops?start_lon=").concat(t.coords.longitude,"&start_lat=").concat(t.coords.latitude)+"&end_lon=".concat(n.coordinates[0],"&end_lat=").concat(n.coordinates[1],"&max_detour_seconds=400"));case 6:return o=e.sent,e.next=9,o.json();case 9:c=e.sent,r(!1),u(c.reststops),x(c.route),m(c.bbox);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){I(T,W)}),[T,W]),Object(h.jsxs)(a.l,{children:[Object(h.jsx)(a.h,{children:Object(h.jsx)(a.r,{children:Object(h.jsx)(a.p,{placeholder:"What's your destination?",onIonChange:function(e){S(e.detail.value),u([]),x(null),m([])}})})}),Object(h.jsxs)(a.g,{fullscreen:!0,children:[Object(h.jsx)(a.h,{collapse:"condense",children:Object(h.jsx)(a.r,{children:Object(h.jsx)(a.q,{size:"large",children:"Reststops"})})}),!n&&0===s.length&&null===w&&Object(h.jsx)("div",{children:"Please select a destination"}),!n&&0===s.length&&null!==w&&w.length>=3&&Object(h.jsx)(z,{destination:w,onDestinationSelected:function(e){return E(e)}}),s.length>0&&Object(h.jsx)(k,{reststops:s,route:f,bbox:g,currentLocation:T}),n&&Object(h.jsx)(a.m,{type:"indeterminate"}),s.map((function(e,t){return Object(h.jsx)(L,{reststop:e},t)}))]})]})},W=(n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),function(){return Object(h.jsx)(a.a,{children:Object(h.jsx)(u.a,{children:Object(h.jsx)(a.o,{children:Object(h.jsx)(s.a,{exact:!0,path:"/",children:Object(h.jsx)(D,{})})})})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var E=function(e){e&&e instanceof Function&&n.e(58).then(n.bind(null,189)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),c(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(W,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),E()},85:function(e,t,n){var o={"./ion-action-sheet.entry.js":[129,5],"./ion-alert.entry.js":[130,6],"./ion-app_8.entry.js":[131,7],"./ion-avatar_3.entry.js":[132,17],"./ion-back-button.entry.js":[133,18],"./ion-backdrop.entry.js":[134,43],"./ion-button_2.entry.js":[135,19],"./ion-card_5.entry.js":[136,20],"./ion-checkbox.entry.js":[137,21],"./ion-chip.entry.js":[138,22],"./ion-col_3.entry.js":[139,44],"./ion-datetime_3.entry.js":[140,10],"./ion-fab_3.entry.js":[141,23],"./ion-img.entry.js":[142,45],"./ion-infinite-scroll_2.entry.js":[143,46],"./ion-input.entry.js":[144,24],"./ion-item-option_3.entry.js":[145,25],"./ion-item_8.entry.js":[146,26],"./ion-loading.entry.js":[147,27],"./ion-menu_3.entry.js":[148,28],"./ion-modal.entry.js":[149,8],"./ion-nav_2.entry.js":[150,14],"./ion-popover.entry.js":[151,9],"./ion-progress-bar.entry.js":[152,29],"./ion-radio_2.entry.js":[153,30],"./ion-range.entry.js":[154,31],"./ion-refresher_2.entry.js":[155,11],"./ion-reorder_2.entry.js":[156,16],"./ion-ripple-effect.entry.js":[157,47],"./ion-route_4.entry.js":[158,32],"./ion-searchbar.entry.js":[159,33],"./ion-segment_2.entry.js":[160,34],"./ion-select_3.entry.js":[161,35],"./ion-slide_2.entry.js":[162,48],"./ion-spinner.entry.js":[163,13],"./ion-split-pane.entry.js":[164,49],"./ion-tab-bar_2.entry.js":[165,36],"./ion-tab_2.entry.js":[166,15],"./ion-text.entry.js":[167,37],"./ion-textarea.entry.js":[168,38],"./ion-toast.entry.js":[169,39],"./ion-toggle.entry.js":[170,12],"./ion-virtual-scroll.entry.js":[171,50]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=85,e.exports=r},87:function(e,t,n){var o={"./ion-icon.entry.js":[172,57]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=87,e.exports=r}},[[127,3,4]]]);
//# sourceMappingURL=main.77bef56d.chunk.js.map